<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# Run and deploy your AI Studio app

This contains everything you need to run your app locally.

View your app in AI Studio: https://ai.studio/apps/drive/1LU0H7WJrzGpVFUX0ljk_jv_NbKPYL9cE

## Run Locally

**Prerequisites:**  Node.js

1. Install dependencies:
   `npm install`
2. Set the `GEMINI_API_KEY` in [.env.local](.env.local) to your Gemini API key
3. Run the app:
   `npm run dev`

## File Share (Framo G:\\) Integration

The backend can read from a corporate file share (e.g., G:\\ on Windows servers). Configure one of these env vars for the backend:

- `FILE_SHARE_ROOT` absolute path to the share root (preferred)
- `G_DRIVE_PATH` alternative variable name for compatibility

If unset, development defaults to `./backend/files` on non-Windows and `G:\\` on Windows. Endpoints:

- `GET /api/files?path=relative/subdir` list directory contents (auth required)
- `GET /api/file?path=relative/file.txt` read small text files (<=2MB)

Security: paths are resolved safely under the configured root; only read operations are supported by default.

Note: The previously prototyped Excel import feature has been rolled back and is not available in this build.

## Deploy to Render (Cloud)

Option A — Blueprint (recommended)

1. Push to GitHub (done).
2. In Render, choose New > Blueprint and point to `render.yaml` in this repo.
3. Create the services when prompted:
   - Backend (Node) at `/backend`
   - Frontend (Static) at repo root
4. Add a PostgreSQL instance and set `DATABASE_URL` on the backend service (internal DB URL preferred). 
5. Environment variables (backend):
   - `JWT_SECRET` — any strong random string (or auto-generated by Render from blueprint)
   - `ALLOW_ONRENDER` — `true` (enables *.onrender.com CORS)
   - `FILES_ENABLED` — `false` (default)
6. Deploy. Backend runs DB migrations automatically via `npm run migrate` before starting.
7. Frontend receives `VITE_API_URL` from the backend service URL automatically (blueprint wiring).

Option B — Manual services

1. Create a Web Service for `/backend` with:
   - Build Command: `npm install`
   - Start Command: `npm run migrate && node index.js`
   - Env Vars: `DATABASE_URL`, `JWT_SECRET`, `ALLOW_ONRENDER=true`, `FILES_ENABLED=false`
2. Create a Static Site for the frontend (root):
   - Build Command: `npm install && npm run build`
   - Publish Directory: `dist`
   - Env Var: `VITE_API_URL` = the backend service URL

Verification

- Backend health: `GET /api/contacts`
- Migration check: `GET /api/diagnostics/project-type-counts`
